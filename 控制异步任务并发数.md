实现控制异步任务并发数的函数(例如同时最多执行2个请求)
```
class AsyncPool {
  constructor(max){
    this.max = max
    this.current = 0
    this.queue = []
  }
  add(task){
    this.queue.push(task)
    this.run()
  }
  run(){
    while(this.current<this.max&&this.queue.length){
      const task = this.queue.shift()
      this.current++
      task().finally(()=>{
        this.current--
        this.run()
      })
    }
  }
}
```